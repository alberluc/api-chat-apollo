exports.id=0,exports.modules={4:function(n,e,t){"use strict";(function(o){var r=this&&this.__awaiter||function(n,e,t,o){return new(t||(t=Promise))(function(r,c){function i(n){try{u(o.next(n))}catch(n){c(n)}}function s(n){try{u(o.throw(n))}catch(n){c(n)}}function u(n){n.done?r(n.value):new t(function(e){e(n.value)}).then(i,s)}u((o=o.apply(n,e||[])).next())})},c=this&&this.__generator||function(n,e){var t,o,r,c,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return c={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function s(c){return function(s){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,o=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){i.label=c[1];break}if(6===c[0]&&i.label<r[1]){i.label=r[1],r=c;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(c);break}r[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(n,i)}catch(n){c=[6,n],o=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},i=this;Object.defineProperty(e,"__esModule",{value:!0}),t(5);var s=t(6),u=t(7);t(8).createConnection({type:"mongodb",url:"mongodb://localhost:27017/chat",port:27017,name:"ft",useNewUrlParser:!0}).then(function(e){return r(i,void 0,void 0,function(){var e,t,i,l,a,f=this;return c(this,function(h){switch(h.label){case 0:return console.log("database connected"),console.log("coucou"),[4,s.buildSchema({resolvers:[o+"/**/*.resolver.ts"]})];case 1:return e=h.sent(),console.log("schema built"),[4,(t=new u.ApolloServer({schema:e,context:function(n){n.req;var e=n.connection;return r(f,void 0,void 0,function(){return c(this,function(n){return e?[2,e.context]:[2,{token:Math.random()}]})})},subscriptions:{onConnect:function(n,e,t){console.log("connected",n)},onDisconnect:function(n,e){console.log("disconnected")}}})).listen()];case 2:return i=h.sent(),l=i.url,a=i.subscriptionsUrl,n.hot.accept(),n.hot.dispose(function(){return t.stop()}),console.log("Server start on "+l),console.log("Subscriptions start on "+a),[2]}})})}).catch(function(n){return console.log(n)})}).call(this,"/")}};